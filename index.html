<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>¿Qué animal se parece más a ti?</title>
<style>
body {
  font-family: system-ui, sans-serif;
  background: linear-gradient(135deg, #eef2f3, #dbe7e9);
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
}
.container {
  max-width: 720px;
  width: 90%;
  background: #fff;
  margin: 40px 0;
  padding: 30px;
  border-radius: 18px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.12);
}
h1, h2 { text-align: center; }
.pregunta { margin-top: 30px; }
.opcion {
  display: block;
  width: 100%;
  margin: 10px 0;
  padding: 14px;
  border-radius: 12px;
  border: none;
  background: #4a7c59;
  color: #fff;
  font-size: 16px;
  cursor: pointer;
}
.opcion:hover { background: #3b6448; }
.hidden { display: none; }
.tarjeta {
  display: flex;
  gap: 20px;
  align-items: center;
  background: #f7f7f7;
  padding: 20px;
  border-radius: 16px;
  margin-top: 30px;
}
.tarjeta img {
  width: 120px;
  height: 120px;
  object-fit: cover;
  border-radius: 14px;
}
</style>
</head>
<body>
<div class="container">
  <h1>¿Qué animal se parece más a ti?</h1>
  <div id="test"></div>
  <div id="resultado" class="hidden"></div>
</div>

<script>
// ---------- DATOS DE ANIMALES ----------
const animales = {
  Zorro:{texto:"Adaptable, flexible y con lectura del entorno.",nivel:2,img:"imagenes/zorro.jpg"},
  Nutria:{texto:"Curiosa, resolutiva y versátil.",nivel:2,img:"imagenes/nutria.jpg"},
  Cuervo:{texto:"Observador, inteligente y estratégico.",nivel:3,img:"imagenes/cuervo.jpg"},
  Petirrojo:{texto:"Constante, atento y territorial.",nivel:3,img:"imagenes/petirrojo.jpg"},
  Ratón:{texto:"Ágil, prudente y muy reactivo.",nivel:4,img:"imagenes/raton.jpg"},
  Jabalí:{texto:"Oportunista, resistente y decidido.",nivel:2,img:"imagenes/jabali.jpg"},
  Tejón:{texto:"Persistente, trabajador y metódico.",nivel:3,img:"imagenes/tejon.jpg"},
  Erizo:{texto:"Reservado, defensivo y cauto.",nivel:4,img:"imagenes/erizo.jpg"},
  Garza:{texto:"Paciente, precisa y silenciosa.",nivel:3,img:"imagenes/garza.jpg"},
  Halcón:{texto:"Especialista, rápido y certero.",nivel:3,img:"imagenes/halcon.jpg"},
  Abeja:{texto:"Autónoma, constante y eficaz.",nivel:4,img:"imagenes/abeja.jpg"},
  Lechuza:{texto:"Analítica, estratégica y nocturna.",nivel:3,img:"imagenes/lechuza.jpg"},
  Mantis:{texto:"Precisa, paciente y focalizada.",nivel:4,img:"imagenes/mantis.jpg"},
  Víbora:{texto:"Calculadora y selectiva.",nivel:4,img:"imagenes/vibora.jpg"},
  Salamandra:{texto:"Discreta y muy ligada a su entorno.",nivel:4,img:"imagenes/salamandra.jpg"},
  Sapo:{texto:"Resistente y perseverante.",nivel:4,img:"imagenes/sapo.jpg"},
  Lagarto:{texto:"Eficiente en el uso de recursos.",nivel:4,img:"imagenes/lagarto.jpg"},
  Galápago:{texto:"Constante y de ritmo propio.",nivel:4,img:"imagenes/galapago.jpg"},
  Escarabajo:{texto:"Gran fuerza relativa y resistencia.",nivel:4,img:"imagenes/escarabajo.jpg"}
};

// ---------- PREGUNTAS PRINCIPALES ----------
const preguntasPrincipales = [
{texto:"Cuando algo se complica, tú tiendes a…",opciones:[
 {t:"Insistir y resistir",a:["Tejón","Sapo","Escarabajo"]},
 {t:"Buscar alternativas",a:["Zorro","Nutria","Ratón"]},
 {t:"Esperar el momento adecuado",a:["Garza","Lechuza","Mantis"]},
 {t:"Reducir exposición y observar",a:["Erizo","Petirrojo","Galápago"]}
]},
{texto:"Ante un entorno nuevo…",opciones:[
 {t:"Exploras con curiosidad",a:["Nutria","Cuervo","Zorro"]},
 {t:"Analizas antes de moverte",a:["Lechuza","Garza","Víbora"]},
 {t:"Buscas refugios claros",a:["Erizo","Ratón","Lagarto"]},
 {t:"Actúas solo si hace falta",a:["Halcón","Mantis"]}
]},
{texto:"En situaciones de presión…",opciones:[
 {t:"Te adaptas rápido",a:["Zorro","Ratón"]},
 {t:"Mantienes tu estrategia",a:["Tejón","Sapo","Galápago"]},
 {t:"Esperas oportunidad clara",a:["Halcón","Garza","Víbora"]},
 {t:"Te retiras si no compensa",a:["Erizo","Salamandra"]}
]},
{texto:"Tu energía diaria suele ser…",opciones:[
 {t:"Constante",a:["Tejón","Abeja","Galápago"]},
 {t:"Variable pero intensa",a:["Nutria","Zorro","Cuervo"]},
 {t:"Muy focalizada",a:["Halcón","Mantis"]},
 {t:"Baja pero eficiente",a:["Lagarto","Sapo"]}
]},
{texto:"Cuando decides actuar…",opciones:[
 {t:"Con precisión",a:["Halcón","Mantis","Víbora"]},
 {t:"Paso a paso",a:["Tejón","Garza","Galápago"]},
 {t:"Improvisando",a:["Zorro","Nutria","Ratón"]},
 {t:"Solo si es necesario",a:["Erizo","Salamandra"]}
]},
{texto:"Tu relación con el riesgo es…",opciones:[
 {t:"Muy calculada",a:["Víbora","Lechuza","Cuervo"]},
 {t:"Moderada",a:["Zorro","Nutria","Petirrojo"]},
 {t:"Baja",a:["Erizo","Ratón","Galápago"]},
 {t:"Asumible si compensa",a:["Halcón","Jabalí"]}
]}
];

// ---------- PREGUNTAS DE DESEMPATE ----------
const preguntasDesempate = [
{texto:"En una decisión importante, ¿qué pesa más para ti?",opciones:[
 {t:"Seguridad y previsión",a:["Erizo","Ratón","Galápago"]},
 {t:"Oportunidad y rapidez",a:["Zorro","Nutria","Jabalí"]},
 {t:"Precisión y estrategia",a:["Halcón","Lechuza","Mantis"]},
 {t:"Constancia y resistencia",a:["Tejón","Sapo","Escarabajo"]}
]},
{texto:"Cuando trabajas en equipo…",opciones:[
 {t:"Tomo la iniciativa",a:["Zorro","Cuervo","Nutria"]},
 {t:"Colaboro según convenga",a:["Petirrojo","Abeja","Galápago"]},
 {t:"Observo y actúo con precisión",a:["Halcón","Mantis","Víbora"]},
 {t:"Sigo el plan paso a paso",a:["Tejón","Sapo","Escarabajo"]}
]}
];

// ---------- VARIABLES DE CONTROL ----------
let puntos = {};
Object.keys(animales).forEach(a=>puntos[a]=0);

let i = 0;
let enDesempate = false;

const test = document.getElementById("test");
const res = document.getElementById("resultado");

// ---------- FUNCIONES ----------
function mostrarPregunta(){
  test.innerHTML="";
  let preguntasActuales = enDesempate ? preguntasDesempate : preguntasPrincipales;
  if(i >= preguntasActuales.length){
    if(!enDesempate){
      // Revisar empate
      const ranking = Object.entries(puntos).sort((a,b)=>b[1]-a[1]);
      const max = ranking[0][1];
      let cand = ranking.filter(r=>r[1]===max).map(r=>r[0]);
      if(cand.length > 1){
        // Activar preguntas de desempate
        enDesempate = true;
        i = 0;
        mostrarPregunta();
        return;
      }
    }
    // Si ya no hay preguntas o sigue empate, aplicar prioridad
    mostrarResultado();
    return;
  }

  const p = preguntasActuales[i];
  const d = document.createElement("div");
  d.className="pregunta";
  d.innerHTML="<h2>"+p.texto+"</h2>";
  p.opciones.forEach(o=>{
    const b = document.createElement("button");
    b.className="opcion";
    b.textContent = o.t;
    b.onclick = ()=>{
      o.a.forEach(an => puntos[an]++);
      i++;
      mostrarPregunta();
    };
    d.appendChild(b);
  });
  test.appendChild(d);
}

function mostrarResultado(){
  test.classList.add("hidden");
  res.classList.remove("hidden");
  const ranking = Object.entries(puntos).sort((a,b)=>b[1]-a[1]);
  const max = ranking[0][1];
  let cand = ranking.filter(r=>r[1]===max).map(r=>r[0]);

  // Si sigue empate, aplicar prioridad por nivel
  cand.sort((a,b)=>animales[b].nivel - animales[a].nivel);
  const elegido = cand[0];

  res.innerHTML = `<h2>Tu animal es</h2>
    <div class="tarjeta">
      <img src="${animales[elegido].img}" alt="${elegido}">
      <div><h3>${elegido}</h3><p>${animales[elegido].texto}</p></div>
    </div>`;
}

// ---------- INICIO DEL TEST ----------
mostrarPregunta();
</script>
</body>
</html>
